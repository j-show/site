<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description" content="jShow's Home, share experiences and ideas"><meta name="keywords" content="jShow, jshow, Node.js, nodejs"><meta http-equiv="Expires" content="0"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Cache-control" content="no-cache"><meta http-equiv="Cache" content="no-cache"><title>1319 - jShow's Home</title><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="https://www.googletagmanager.com/gtag/js?id=UA-141766789-1" async></script><script src="/images/global.js"></script><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><label class="navi-button light" for="navi">MENU</label><div class="main-navication"><div class="owner"><div class="ml30 slider" id="languager"><a class="selected en" href="javascript:void(0);" tag="en">English</a><div class="lang_block" style="display:none;"><a class="en" href="/en/20190612/1319/" tag="en">English</a><a class="zh" href="/zh/20190612/1319/" tag="zh">中文</a></div></div><a href="/en/index.html" target="_self"><i class="icon home"></i><span>Home</span></a><a href="https://github.com/j-show/jshow" target="_blank"><i class="icon github"></i><span>Github</span></a><a href="/tags/index-en.html" target="_self"><i class="icon tag"></i><span>Tags</span></a><a href="/categories/index-en.html" target="_self"><i class="icon category"></i><span>Categories</span></a><a href="/about/index-en.html" target="_self"><i class="icon author"></i><span>About</span></a></div></div><div class="wrapper" id="wrap"><div class="post-header"><div class="background"><img src="/images/post_background.jpg"></div><div class="post-title"><h1 class="title">1319</h1><ul class="meta"><li><i class="icon author"></i>jshow</li><li><i class="icon clock"></i><script>document.write(calcTime(1560336372489));</script></li><li><i class="icon calendar"></i>June 12, 2019</li></ul></div></div><div class="article-content" style="max-width:800px"><ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Framework-Features"><span class="post-toc-number">1.</span> <span class="post-toc-text">Framework Features</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Unification-Code"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">Unification Code</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Flexible-Expansion"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Flexible Expansion</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Flexible-Expansion-1"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">Flexible Expansion</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Sample-Analysis"><span class="post-toc-number">2.</span> <span class="post-toc-text">Sample Analysis</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Widget-Tools"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">Widget Tools</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#P3-Model"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">P3 Model</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Project-Manage-ProjectManage"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">Project Manage ProjectManage</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Project-Object-Project"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">Project Object Project</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Profile-Oject-Profile"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">Profile Oject Profile</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Plugin-Object-Plugin"><span class="post-toc-number">2.2.4.</span> <span class="post-toc-text">Plugin Object Plugin</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#For-Example"><span class="post-toc-number">2.2.5.</span> <span class="post-toc-text">For Example</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#PS"><span class="post-toc-number">3.</span> <span class="post-toc-text">PS</span></a></li></ol>
<h1 id="Framework-Features"><a href="#Framework-Features" class="headerlink" title="Framework Features"></a>Framework Features</h1><h2 id="Unification-Code"><a href="#Unification-Code" class="headerlink" title="Unification Code"></a>Unification Code</h2><p>jShow is an <strong>open tool framework</strong>. It’s designed to support both <code>WebBrowser</code>, <code>Node.js</code> environment.</p>
<p>In actual projects, various custom formatting/verification algorithms are often needed, but because of environmental loading problems, we often need to write different files for the front and back ends, which is not only very troublesome, but also file management and algorithmic. The fix will cause a series of problems.</p>
<p>Now, <code>jShow</code> solves this problem perfectly. With the <code>plug-in tool</code> method, the same file can be used at the webbrower and service. This is very helpful for unifying the webbrower and service algorithms.</p>
<blockquote>
<p>When using <a href="https://github.com/j-show/jshow-svr" target="_blank" rel="noopener">jshow-svr</a> library as the service application, no additional settings are required, the library will automatically export the content of <code>jShow</code>‘s <code>WebBrowser</code> version, and automatically export the <code>widget plug-in tool</code> for webbrower call, reducing redundant code as much as possible.</p>
</blockquote>
<h2 id="Flexible-Expansion"><a href="#Flexible-Expansion" class="headerlink" title="Flexible Expansion"></a>Flexible Expansion</h2><p>Friends who have developed complex projects should understand. The most annoying thing is not the complex logic of the project itself, but the invisible traps of various dependent libraries, the conflict between the library and the library.</p>
<p>You have only a few choices:</p>
<ul>
<li>Fix bugs for others and become a glorious code contributor.</li>
<li>Submit issues and wait for someone to fix the problem sometime.</li>
<li>Give up! Change the library or build a wheel yourself, and pray that there will be no problem.</li>
</ul>
<p>At this time, you can try to use the <code>jShow</code> P3 (<code>Project-Profile-Plugin</code>) level model.</p>
<p>The <code>jShow</code> P3 model completely isolates the effects between <code>Project</code>. We have a new solution to the above problem:</p>
<ul>
<li>Create a <code>Project</code> object, and put the problem library inside the object, extract the stage content through <code>Profile</code>, and insert its own code.</li>
<li>Create a <code>Project</code> object, just implement the wheel in the easiest way internally</li>
</ul>
<p>The P3 model is similar to creating a virtual environment that completely isolates the <code>Project</code> objects without regard to mutual interference. Communication between objects is abstracted into an <code>event-driven model</code> that ensures data security.</p>
<blockquote>
<p>The core of the P3 model is the <code>Pour Water Theory</code>. The <code>Project</code> in the P3 model is like a water cup. The data is the water in it. The water of the data is poured from one cup into another, and the whole business logic is finally completed.</p>
</blockquote>
<h2 id="Flexible-Expansion-1"><a href="#Flexible-Expansion-1" class="headerlink" title="Flexible Expansion"></a>Flexible Expansion</h2><p>Of course, the P3 model can do more than just the above patch/isolation work. It’s more important to have multiple different types of application logic concatenated together.</p>
<p>For example, we can use HTTP to create a chat service, WebSocket for communication of chat content.</p>
<p>At this time, the flow of data jumps back and forth between HTTP and WebSocket.</p>
<p>Now, If you want to add a file direct transfer function, it will be the data flow between HTTP/WebSocket/UDP.</p>
<p>If you use the original plug-in implementation, the code will be very redundant, and the data jump is also very confusing.</p>
<p>The P3 model was born to cope with this environment. The <code>Profile</code> object in the model can abstract the business logic into various protocols, complete the data collection and preprocessing through the protocol, and then our <code>Pour Water Theory</code>. The working environment is gone.</p>
<blockquote>
<p>The P3 model itself does not specifically distinguish the types of protocols, so we can abstract network operations, hardware operations, front-end routing, etc. into protocols for processing.</p>
</blockquote>
<blockquote>
<p><a href="https://github.com/j-show/jshow-socket" target="_blank" rel="noopener">jshow-socket</a> and <a href="https://github.com/j-show/jshow-nano" target="_blank" rel="noopener">jshow-nano</a> are respectively application cases of network operation and hardware operation protocol abstraction. After that, <code>jShow</code> will focus on enriching various protocol abstractions to make coding easier.</p>
</blockquote>
<h1 id="Sample-Analysis"><a href="#Sample-Analysis" class="headerlink" title="Sample Analysis"></a>Sample Analysis</h1><blockquote>
<p>So how is this all done?</p>
</blockquote>
<p>jShow uses the WP3 (<code>Widget-Project-Profile-Plugin</code>) hierarchical model, and users can select the appropriate level according to their needs.</p>
<h2 id="Widget-Tools"><a href="#Widget-Tools" class="headerlink" title="Widget Tools"></a>Widget Tools</h2><p>This part is very well understood. <code>jShow</code> has built-in AMD/CMD loader. The plugin is mounted in the tool space of <code>jShow</code> by plugin.</p>
<h2 id="P3-Model"><a href="#P3-Model" class="headerlink" title="P3 Model"></a>P3 Model</h2><p>The P3 model in <code>jShow</code> is actually composed of four parts: application manager (<code>ProjectManage</code>), application instance (<code>Project</code>), protocol instance (<code>Profile</code>), and plugin instance (<code>Plugin</code>).</p>
<h3 id="Project-Manage-ProjectManage"><a href="#Project-Manage-ProjectManage" class="headerlink" title="Project Manage ProjectManage"></a>Project Manage <code>ProjectManage</code></h3><p>The application manager is a singleton mode, the <code>jShow</code> built-in application manager acts as the root node, but it is not initialized by default and needs to be manually initialized.</p>
<p>The Application Manager provides the underlying runtime environment for all application instances and manages scheduling between applications.</p>
<h3 id="Project-Object-Project"><a href="#Project-Object-Project" class="headerlink" title="Project Object Project"></a>Project Object <code>Project</code></h3><p>An application instance is a collection of protocol instances that provide a channel for protocol flow.</p>
<p>The life cycle is roughly similar to the following:</p>
<ul>
<li>Start: Protocol event, providing protocol output data</li>
<li>Process: Plugin processing, data flow and layer processing</li>
<li>Done: Application event, output processed data</li>
</ul>
<h3 id="Profile-Oject-Profile"><a href="#Profile-Oject-Profile" class="headerlink" title="Profile Oject Profile"></a>Profile Oject <code>Profile</code></h3><p>The protocol instance is the main part of the module operation. The protocol instance does not need to consider the processing of data, only consider how to obtain the data.</p>
<blockquote>
<p>How is the data obtained and how does the data trigger the output event?</p>
</blockquote>
<p>Recommended Logic</p>
<blockquote>
<p>Data is obtained from other libraries or protocol instances in the protocol instance. And output data as an event<br>Protocol examples allow for concatenation, and you can set the sequence of operations for multiple protocols (the order of the cups can determine how the water falls)</p>
</blockquote>
<h3 id="Plugin-Object-Plugin"><a href="#Plugin-Object-Plugin" class="headerlink" title="Plugin Object Plugin"></a>Plugin Object <code>Plugin</code></h3><p>Plugin instances are relatively special instances that are allowed to be registered in <code>ProjectManager</code>, <code>Project</code>, <code>Profile</code>.</p>
<p>The plugin instance is responsible for processing the data, regardless of the source of the data, and is only responsible for processing and output according to business needs.</p>
<blockquote>
<p>The plugin instance is output in an asynchronous manner. For details, refer to the asynchronous operation part of <code>jShow</code>.</p>
</blockquote>
<h3 id="For-Example"><a href="#For-Example" class="headerlink" title="For Example"></a>For Example</h3><p>We need to complete a distributed static website project, users can access according to the unified domain name, the application will automatically jump to the actual static website node to speed up access.</p>
<p>According to the demand, we refine the model into the following form:</p>
<ul>
<li><code>ProjectManage</code>：Connect <code>Project</code> list process and processing order<ul>
<li><code>Project</code><ul>
<li>User HTTP access portal：<ul>
<li>Binding domain name</li>
<li>Get user request information</li>
</ul>
</li>
<li>Network node selection:<ul>
<li>Resolve user request source</li>
<li>Identify nearby network nodes</li>
<li>Forward user requests</li>
</ul>
</li>
<li>Static website list<ul>
<li>HTTP request processing</li>
<li>Static file output</li>
<li>Error status</li>
</ul>
</li>
</ul>
</li>
<li><code>Profile</code><ul>
<li>Domain Agreement: Handling Domain Requests</li>
<li>HTTP Profile: Handling HTTP requests</li>
<li>File Profile: Read local files</li>
</ul>
</li>
<li><code>Plugin</code><ul>
<li>DNS</li>
<li>IP area analysis</li>
<li>Exception resolution</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Look, it is so convenient! Through the P3 model, the entire requirement can be split and the parts are independent of each other. Whether it is multi-person cooperation or single-person development, it can be easily coded separately for independent coding, and any part can be tested separately.</p>
<blockquote>
<p>The later <code>jShow</code> is perfecting the mocha test module based on the P3 model, which can automatically identify the P3 model structure and perform unit testing and overall testing for the structure.</p>
</blockquote>
<h1 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h1><p><code>jShow</code> project and the <code>jShow</code> ecosystem are actively developing and we welcome anyone to join the project.</p>
<p>You can come up with your ideas and contribute code to us. We will certify your comments.</p>
</div><div class="article-meta" style="max-width:800px"><div class="tags"><i class="icon tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/explain/">explain</a><span class="tag-list-count">2</span></li></ul></div><div class="categories"><i class="icon category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/jShow/">jShow</a><span class="category-list-count">2</span></li></ul></div></div><ul class="navication"><li class="home"><a href="/"><i class="icon home"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/j-show/jshow" title="Github" target="_blank"><i class="icon github"></i></a></li><li><a href="https://twitter.com/jShow_OS" title="Twitter" target="_blank"><i class="icon twitter"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2019 jShow's Home<br><script type="text/javascript">analytics_google("UA-141766789-1")</script><script type="text/javascript">analytics_cnzz("1277700064")</script><small>POWER BY<a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY<a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><div id="dialog" style="display:none;"></div><script type="text/javascript">$(function () { $("#wrap").addClass("done"); $("#languager").Languager(); });</script></body></html>